# Coursera-Getting-and-Cleaning-Data-Course-Project

Poject's goal is to prepare tidy data that can be used for later analysis. 

This repository contains the following files:
* README.md: current file listing content of repository and lnk betseen files
* run_analysis.R: R script used to generate the data set
* tidy_data.txt: result file of the R script (data filterd, cleaned and meaned from original data set
* CodeBook.md: code bookdescribing content of the tidy data set 

# Original data set
Input data of this clearing process is the 'Human Activity Recognition Using Smartphones Data Set' provided by UCI:
* Description: http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones#
* Download file: https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip

The Human Activity Recognition database has been built from the recordings of 30 subjects performing activities of daily living (ADL) while carrying a waist-mounted smartphone with embedded inertial sensors.

# Data Set cleaning transformation
The R script called run_analysis.R available in this repository perform following steps:
* Check if zip file already exists. If not, donwload it. Unzip it into the current working directory.
* Load all useful files from original dataset into data.table variables (test/X_test.txt, test/y_test.txt, test/subject_test.txt, train/X_train.txt, train/y_train.txt, train/subject_train.txt, activity_labels.txt, features.txt)
* By using activities id as pivot, add activities labels to the 2 data tables which store measures (created with X_tests.txt files) 
* Add 3 columns with subjects ids, activities ids and labels to to the 2 data tables which store measures
* Merge the 2 data tables which store measures in a global data table
* Edit this data table column names by 
  + Adding the labels to global data table (labels extracted from features.txt file)
  + Ensuring names are unique (duplicate names in original data)
* Filter in the global data table, all measures which are mean and standard deviation by using column names. Columns with subjects ids and activities labels are also selected in the filter
* Clean observation labels by removing (,),- characters, adding capital to first character of Mean and Std, tranforming t and f values (for time and frequency) with label "time" asd "freq" et removing duplicates "body" word.
* Create new tidy data table with the average of each variable for each activity and each subject 
* Adapt labels of this new data table with "avg" word at the beginning of each label 
* Write content of this new data table into text file

## Precision about filter on mean and standard deviation measures
Following measures are weighted averages of the frequency and gravity components. They are not considered as "true" mean and have been removed from final dataset.
* fBodyAcc-meanFreq()-X
* fBodyAcc-meanFreq()-Y
* fBodyAcc-meanFreq()-Z
* fBodyAccJerk-meanFreq()-X
* fBodyAccJerk-meanFreq()-Y
* fBodyAccJerk-meanFreq()-Z
* fBodyGyro-meanFreq()-X
* fBodyGyro-meanFreq()-Y
* fBodyGyro-meanFreq()-Z
* fBodyAccMag-meanFreq()
* fBodyBodyAccJerkMag-meanFreq()
* fBodyBodyGyroMag-meanFreq()
* fBodyBodyGyroJerkMag-meanFreq()
* angle(tBodyAccMean,gravity)
* angle(tBodyAccJerkMean),gravityMean)
* angle(tBodyGyroMean,gravityMean)
* angle(tBodyGyroJerkMean,gravityMean)
* angle(X,gravityMean)
* angle(Y,gravityMean)
* angle(Z,gravityMean)

# Output file
The tidy_data.txt text file in this repository was generated bythe run_analysis.R script using R version 3.4.2 on OSX 10.13.1.
The script requires the dplyr package (loaded at the beginning of the script).
